#!/bin/sh

request() {
    local doist_id=24949684
    local today=`date --rfc-3339=date`
    curl -s -u $toggl:api_token 'https://toggl.com/reports/api/v2/summary.csv?grouping=projects&subgrouping=time_entries&order_field=title&order_desc=off&rounding=Off&distinct_rates=Off&status=active&client_ids='$doist_id'&billable=both&calculate=time&sortDirection=asc&sortBy=title&page=1&description=&since='$today'&until='$today'&period=today&with_total_currencies=1&user_agent=Toggl+New+4.8.0&workspace_id=1822560&bars_count=31&subgrouping_ids=true&bookmark_token=&date_format=MM%2FDD%2FYYYY' |
        grep -v Billable |
        sed 's/Doist,//g; s/,/   \t\t/g'
}

todays_link() {
    echo
    echo "https://toggl.com/app/reports/summary/1822560/period/today"
}

request
todays_link
